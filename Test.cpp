/**
 * An example of how to write unit tests.
 * Use this as a basis to build a more complete Test.cpp file.
 * 
 * IMPORTANT: Please write more tests - the tests here are only for example and are not complete.
 *
 * AUTHORS: <Moriya Barel>
 * 
 * Date: 2021-02
 */

#include "doctest.h"
#include "mat.hpp"
using namespace ariel;

#include <string>
#include <algorithm>
using namespace std;

/**
 * Returns the input string without the whitespace characters: space, newline and tab.
 * Requires std=c++2a.
 */
string nospaces(string input) {
	std::erase(input, ' ');
	std::erase(input, '\t');
	std::erase(input, '\n');
	std::erase(input, '\r');
	return input;
}


TEST_CASE("Good input") {
	CHECK(nospaces(mat(9, 7, '@', '-')) == nospaces("@@@@@@@@@\n"
													"@-------@\n"
													"@-@@@@@-@\n"
													"@-@---@-@\n"
													"@-@@@@@-@\n"
													"@-------@\n"
													"@@@@@@@@@"));

	CHECK(nospaces(mat(3, 3, '$', '#')) == nospaces("$$$\n"
													"$#$\n"
													"$$$"));

	CHECK(nospaces(mat(5, 13, '~', '#')) == nospaces("~~~~~\n"
													 "~###~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~#~#~\n"
													 "~###~\n"
													 "~~~~~"));

	CHECK(nospaces(mat(9, 9, '*', '!')) == nospaces("*********\n"
													"*!!!!!!!*\n"
													"*!*****!*\n"
													"*!*!!!*!*\n"
													"*!*!*!*!*\n"
													"*!*!!!*!*\n"
													"*!*****!*\n"
													"*!!!!!!!*\n"
													"*********"));

	CHECK(nospaces(mat(15, 9, '@', '*')) == nospaces("@@@@@@@@@@@@@@@\n"
													 "@*************@\n"
													 "@*@@@@@@@@@@@*@\n"
													 "@*@*********@*@\n"
													 "@*@*@@@@@@@*@*@\n"
													 "@*@*********@*@\n"
													 "@*@@@@@@@@@@@*@\n"
													 "@*************@\n"
													 "@@@@@@@@@@@@@@@"));

	CHECK(nospaces(mat(31, 15, '&', '^')) == nospaces("&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&\n"
													  "&^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&\n"
													  "&^&&&&&&&&&&&&&&&&&&&&&&&&&&&^&\n"
													  "&^&^^^^^^^^^^^^^^^^^^^^^^^^^&^&\n"
													  "&^&^&&&&&&&&&&&&&&&&&&&&&&&^&^&\n"
													  "&^&^&^^^^^^^^^^^^^^^^^^^^^&^&^&\n"
													  "&^&^&^&&&&&&&&&&&&&&&&&&&^&^&^&\n"
													  "&^&^&^&^^^^^^^^^^^^^^^^^&^&^&^&\n"
													  "&^&^&^&&&&&&&&&&&&&&&&&&&^&^&^&\n"
													  "&^&^&^^^^^^^^^^^^^^^^^^^^^&^&^&\n"
													  "&^&^&&&&&&&&&&&&&&&&&&&&&&&^&^&\n"
													  "&^&^^^^^^^^^^^^^^^^^^^^^^^^^&^&\n"
													  "&^&&&&&&&&&&&&&&&&&&&&&&&&&&&^&\n"
													  "&^^^^^^^^^^^^^^^^^^^^^^^^^^^^^&\n"
													  "&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&"));

	CHECK(nospaces(mat(25, 7, '@', '-')) == nospaces("@@@@@@@@@@@@@@@@@@@@@@@@@\n"
													 "@-----------------------@\n"
													 "@-@@@@@@@@@@@@@@@@@@@@@-@\n"
													 "@-@-------------------@-@\n"
													 "@-@@@@@@@@@@@@@@@@@@@@@-@\n"
													 "@-----------------------@\n"
													 "@@@@@@@@@@@@@@@@@@@@@@@@@"));

	CHECK(mat(3, 1, '@', '-') == "@@@");

	CHECK(nospaces(mat(5, 5, '#', '-')) == nospaces("#####\n"
													"#---#\n"
													"#-#-#\n"
													"#---#\n"
													"#####\n"));												 	

    CHECK(nospaces(mat(17, 3, '$', '~')) == nospaces("$$$$$$$$$$$$$$$$$\n"
													 "$~~~~~~~~~~~~~~~$\n"
													 "$$$$$$$$$$$$$$$$$"));

	CHECK(nospaces(mat(75, 35, '@', '-')) == nospaces("@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n"
													  "@-------------------------------------------------------------------------@\n"
													  "@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@\n"
													  "@-@---------------------------------------------------------------------@-@\n"
													  "@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@\n"
													  "@-@-@-------------------------------------------------------------------@-@\n"
													  "@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@\n"
													  "@-@-@-@---------------------------------------------------------------@-@-@\n"
													  "@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@\n"
													  "@-@-@-@-@-----------------------------------------------------------@-@-@-@\n"
													  "@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@\n"
													  "@-@-@-@-@-@-------------------------------------------------------@-@-@-@-@\n"
													  "@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@---------------------------------------------------@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@-----------------------------------------------@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@-@-------------------------------------------@-@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@-----------------------------------------------@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@---------------------------------------------------@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@-@\n"
													  "@-@-@-@-@-@-------------------------------------------------------@-@-@-@-@\n"
													  "@-@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@-@\n"
													  "@-@-@-@-@-----------------------------------------------------------@-@-@-@\n"
													  "@-@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@-@\n"
													  "@-@-@-@---------------------------------------------------------------@-@-@\n"
													  "@-@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@-@\n"
													  "@-@-@-------------------------------------------------------------------@-@\n"
													  "@-@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@\n"
													  "@-@---------------------------------------------------------------------@-@\n"
													  "@-@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@\n"
													  "@-------------------------------------------------------------------------@\n"
													  "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"));

	CHECK(nospaces(mat(9, 5, '#', '@')) == nospaces("#########\n"
													"#@@@@@@@#\n"
													"#########"));												  

	CHECK(nospaces(mat(5, 10, '@', '*')) == nospaces("@@@@@\n"
													 "@***@\n"
													 "@*@*@\n"
													 "@*@*@\n"
													 "@*@*@\n"
													 "@*@*@\n"
													 "@*@*@\n"
													 "@*@*@\n"
													 "@***@\n"
													 "@@@@@"));

	CHECK(nospaces(mat(25, 15, '^', '@')) == nospaces("^^^^^^^^^^^^^^^^^^^^^^^^^\n"
													  "^@@@@@@@@@@@@@@@@@@@@@@@^\n"
													  "^@^^^^^^^^^^^^^^^^^^^^^@^\n"
													  "^@^@@@@@@@@@@@@@@@@@@@^@^\n"
													  "^@^@^^^^^^^^^^^^^^^^^@^@^\n"
													  "^@^@^@@@@@@@@@@@@@@@^@^@^\n"
													  "^@^@^@^^^^^^^^^^^^^@^@^@^\n"
													  "^@^@^@^@@@@@@@@@@@^@^@^@^\n"
													  "^@^@^@^^^^^^^^^^^^^@^@^@^\n"
													  "^@^@^@@@@@@@@@@@@@@@^@^@^\n"
													  "^@^@^^^^^^^^^^^^^^^^^@^@^\n"
													  "^@^@@@@@@@@@@@@@@@@@@@^@^\n"
													  "^@^^^^^^^^^^^^^^^^^^^^^@^\n"
													  "^@@@@@@@@@@@@@@@@@@@@@@@^\n"
													  "^^^^^^^^^^^^^^^^^^^^^^^^^"));

	CHECK(nospaces(mat(7, 5, '*', '!')) == nospaces("*******\n"
													"*!!!!!*\n"
													"*!***!*\n"
													"*!!!!!*\n"
													"*******"));


}

TEST_CASE("Bad input") {
    CHECK_THROWS(mat(10, 5, '$', '%')); //cant be even
    
	CHECK_THROWS(mat(8, 2, '#', '!')); //cant be even

	CHECK_THROWS(mat(6, 5, ' ', '%')); //cant be even

}

TEST_CASE("Wrong") {
	CHECK(nospaces(mat(3, 3, '@', '!')) != nospaces("@@@\n"
													"!@@\n"
												    "@@@"));

	CHECK(mat(1, 1, '#', '!') != "!");											   
}

